!function(e){function t(i){if(n[i])return n[i].exports;var o=n[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=9)}([function(e,t,n){var i=function(e){var t=$("<div></div>"),n=($('<i class="iconfont icon-jinggao"></i>'),$("<span></span>"));t.css({position:"fixed",textAlign:"center",width:"180px",bottom:"30px",left:"calc(50% - 90px)",fontSize:"12px",borderRadius:"3px",color:"#fff",opacity:"0.1",background:"rgba(0,0,0,0.7)"}),n.css({lineHeight:"25px"}),n.append(e),t.append(n),$("body").append(t),t.animate({opacity:"1",bottom:"50px"},200,function(){setTimeout(function(){t.animate({opacity:"0.1",bottom:"30px"},function(){t.remove()})},1500)})};e.exports=i},function(e,t,n){function i(){this.container=$("<div></div>"),this.container.prop("id","loadingPc");var e=$("<div></div>");this.container.prop("class","loading-box");var t=$("<p>请稍后</p>"),n=$('<img src="http://www.suiyiyou.net/Public/common/loading.svg">');this.container.css({position:"fixed",left:0,top:0,width:"100%",height:"100%",zIndex:99,display:"none"}),e.css({width:"100px",height:"100px",background:"rgba(0, 0, 0, 0.5)",borderRadius:"10px",margin:"70% auto 0"}),n.css({margin:"0 auto",paddingTop:"10px",display:"block"}),t.css({textAlign:"center",color:"#fff",fontSize:"14px",marginTop:"5px"}),e.append(n,t),this.container.append(e),$("body").append(this.container),this.show=function(){this.container.show()},this.hide=function(){this.container.hide()}}e.exports=new i},,,,,,,,function(e,t,n){function i(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),n=window.location.search.substr(1).match(t);return null!=n?encodeURI(n[2]):null}function o(e){var t=document.cookie.split("; "),n=0;for(n=0;n<t.length;n++){var i=t[n].split("=");if(i[0]==e){return decodeURIComponent(i[1])}}return""}function s(e){return!!/^[1-9]{1}[0-9]{14}$|^[1-9]{1}[0-9]{16}([0-9]|[xX])$/.test(e)}function a(e,t,n){return'<div class="num-box"><p class="one-price">￥<span class="js_pri">'+e+"</span>/"+t+'</p><div class="select-num"><p class="js_red"><i class="iconfont icon-jianshao"></i></p><span data-type='+n+' class="choose-num man">'+n+'</span><p class="js_add"><i class="iconfont icon-zengjia"></i></p></div></div>'}n(10);var r=n(0),c=n(1),p=$("#bottomTotalPri"),d=+o("kc"),u=1,l=o("price"),f=i("shopCode"),m=i("shopType"),x=o("name"),h=o("zfInfo"),v=o("date"),g=v.split("-"),b=o("childPrice"),y=o("dfc"),j=o("zc");$("#ticketTime").text(v+"("+function(e,t,n){return{0:"周日",1:"周一",2:"周二",3:"周三",4:"周四",5:"周五",6:"周六"}[new Date(e,t-1,n).getDay()]}(g[0],g[1],g[2])+")"),$("#totalPri").text(l),$("#bottomTotalPri").text(l),x?$("#ticketName").text(x):location.href=controller+"/p_route?shopCode="+f+"&shopType="+m,h=JSON.parse(h),"string"==typeof h?$("#zfTitle").hide():$("#zfNum").html(function(e){for(var t="",n=e.length,i=0;i<n;i++)t+='<div class="num-box"><p class="one-price">￥<span class="js_pri">'+e[i].price+'</span>/人</p><p class="item-name">'+e[i].name+'</p><div class="select-num"><p class="js_red"><i class="iconfont icon-jianshao"></i></p><span class="choose-num zf">0</span><p class="js_add"><i class="iconfont icon-zengjia"></i></p></div></div>';return t}(h)),b?$("#peopleNum").append(a(l,"成人",1),a(b,"儿童",0)):$("#peopleNum").append(a(l,"人",1)),y&&($("#dfcBox").append('<p class="subtitle">单房数量</p><div class="num-box"><p class="one-price">￥<span class="js_pri">'+y+'</span>/单房差</p><div class="select-num"><p class="js_red"><i class="iconfont icon-jianshao"></i></p><span id="dfcNum" class="choose-num">0</span><p class="js_add"><i class="iconfont icon-zengjia"></i></p></div></div>'),$("#dfcBox").on("click",".js_red",function(){var e=$(this).parents(".num-box"),t=100*+e.find(".js_pri").text(),n=e.find(".choose-num"),i=+n.text();if(0==i)return!1;var o=100*+p.text();n.text(i-=1),o=((o-t)/100).toFixed(2),Number(o)==o&&p.text(Number(o))}),$("#dfcBox").on("click",".js_add",function(){var e=$(this).parents(".num-box"),t=100*+e.find(".js_pri").text(),n=e.find(".choose-num"),i=+n.text();if(j){if(u==i)return r("单房差已与人数数量一致"),!1}else if(u-+$(".choose-num.man").eq(1).text()==i)return r("单房差已与成人数量一致"),!1;var o=100*+p.text();n.text(i+=1),o=((o+t)/100).toFixed(2),Number(o)==o&&p.text(Number(o))})),$("#ticketNumBox").on("click",".js_red",function(){var e=$(this).parents(".num-box"),t=100*+e.find(".js_pri").text(),n=e.find(".choose-num"),i=+n.text();if(n.hasClass("man")){if("1"==n.attr("data-type")&&1==i)return r("成人最少购买数量1"),!1;if("0"==n.attr("data-type")&&0==i)return!1;u-=1;for(var o=$(".choose-num.zf"),s=o.parents(".num-box").find(".js_pri"),a=0;a<o.length;a++)+o.eq(a).text()>u&&(o.eq(a).text(u),p.text((100*+p.text()-100*+s.eq(a).text())/100));var c=$("#dfcNum");dfcNum=+c.text(),y&&"1"==n.attr("data-type")&&(j?u<dfcNum&&(c.text(dfcNum-=1),p.text((100*+p.text()-100*+y)/100)):u-+$(".choose-num.man").eq(1).text()<dfcNum&&(c.text(dfcNum-=1),p.text((100*+p.text()-100*+y)/100)))}if(n.hasClass("zf")&&0==i)return!1;var d=100*+p.text();n.text(i-=1),d=((d-t)/100).toFixed(2),Number(d)==d&&p.text(Number(d))}),$("#ticketNumBox").on("click",".js_add",function(){var e=$(this).parents(".num-box"),t=100*+e.find(".js_pri").text(),n=e.find(".choose-num"),i=+n.text();if(n.hasClass("man")){if(!(u<d))return r("已达到库存上限"),!1;u+=1}if(n.hasClass("zf")&&i==u)return r("数量已与人数一致"),!1;var o=100*+p.text();n.text(i+=1),o=((o+t)/100).toFixed(2),Number(o)==o&&p.text(Number(o))}),$("#goTourBtn").click(function(){if($("#reserveCheck").prop("checked")){if(confirm("是否确认"+$("#ticketTime").text()+"出行?")){$("#reserveMess").fadeOut(200,function(){$("#tourristMess").fadeIn(200)});var e=p.text();$("#orderTotalPri").text(e);var t=$(".choose-num.man");if(1==t.length)var n=+t.text()-1;else var n=+t.eq(0).text()+ +t.eq(1).text()-1;for(var i="",o=0;o<n;o++)i+='<div class="item-container"><div class="item-box"><p class="item-p"><span class="red">'+(o+2)+'.</span>游客姓名 : </p><input class="item-inp name" placeholder="姓名" type="text"></div><div class="item-box"><p class="item-p">身份证号 : </p><input class="item-inp identify" type="text" placeholder="若是儿童输入出生日期"></div></div>';$("#secItem").html(i)}}else r("请先确认预定须知!!!")}),$(".iconfont.icon-zuojiantou").click(function(){$("#tourristMess").fadeOut(200,function(){$("#reserveMess").fadeIn(200)})}),$("#takeOrderBtn").click(function(){var e=$("#tourName").val();if(!e)return r("请填写第1位游客的真实姓名!"),!1;var t=$("#tourMobile").val();if(!t)return r("请填写第1位游客的手机号码!"),!1;if(!/^1\d{10}$/.test(t))return r("第1位游客手机号码有误，请重填"),!1;var n=$("#tourIdentify").val();if(!n)return r("请输入第1位游客的身份证号码!"),!1;if(!s(n))return r("第1位游客身份证号码错误!"),!1;var a=$("#remarks").val(),p={};p.info=[];for(var d=$(".item-container").length,u=0;u<d;u++){var l=$(".item-container").eq(u),f=l.find(".name").val(),x=l.find(".identify").val();if(!f)return r("请输入第"+(u+2)+"位游客的姓名!"),!1;if(!x)return r("请输入第"+(u+2)+"位游客的身份证或出生日期!"),!1;var g={name:f,identify:x};p.info.push(g)}if(p.g_code=i("shopCode"),p.g_user_id=o("user"),p.identification=n,p.mobile=t,p.name=e,p.jxscode="",p.remarks=a,p.g_on_time=v,p.dfcNum=+$("#dfcNum").text(),h)for(var b=$(".choose-num.zf"),u=0;u<h.length;u++)h[u].num=b.eq(u).text();p.zfInfo=h;var y=$(".choose-num.man");1==y.lenght?(p.menNum=y.text(),p.childNum=0):(p.menNum=y.eq(0).text(),p.childNum=y.eq(1).text()),p.totalPrice=$("#orderTotalPri").text();var j=$(this);j.prop("disabled",!0),j.css("backgroundColor","#ffa69c"),c.show(),$.ajax({url:"http://www.suiyiyou.net/index.php/weixin/Order/addGroupOrder",data:p,type:"POST",success:function(e){c.hide();var t=e.code,n=e.data;200==t?location.href="http://www.suiyiyou.net/index.php/Weixin/Jsapi/index?&orderSn="+n.orderSn+"&shopType="+m+"&":(r(e.msg),j.prop("disabled",!1),j.css("backgroundColor","#ff1900"))}})}),CONFIG.jsApiList=["onMenuShareTimeline","onMenuShareAppMessage"],wx.config(CONFIG);var N;N=i("pid")?location.href:location.href+"&pid="+o("pid"),wx.ready(function(){wx.onMenuShareTimeline({title:document.title,link:N,imgUrl:public+"/Weixin/image/wxbg.png"}),wx.onMenuShareAppMessage({title:document.title,desc:"我的旅游小店，随我心，游天下",link:N,imgUrl:public+"/Weixin/image/wxbg.png"})})},function(e,t){}]);