!function(t){function e(s){if(i[s])return i[s].exports;var n=i[s]={i:s,l:!1,exports:{}};return t[s].call(n.exports,n,n.exports,e),n.l=!0,n.exports}var i={};e.m=t,e.c=i,e.d=function(t,i,s){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:s})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=0)}([function(t,e,i){function s(t,e,i){var s=new Date;s.setTime(s.getTime()+i),document.cookie=t+"="+encodeURIComponent(e)+";expires="+s.toUTCString()}function n(t){var e=new RegExp("(^|&)"+t+"=([^&]*)(&|$)"),i=window.location.search.substr(1).match(e);return null!=i?unescape(i[2]):null}function o(t,e,i){for(var s=c(t,e),n=s.length,o="",a=0,h=0;h<n;h++){o+="<tr>";for(var l=0;l<s[h].length;l++)s[h][l].num?(a++,""==i[a]?o+='<td class="disabled"><p>'+s[h][l].num+"</p></td>":(o+='<td class="js_choose" data-gotime='+i[a].y_b_time+"><p>"+s[h][l].num+'</p><p class="date-price">￥<span class="ticket-pri">'+i[a].y_my_price+"</span></p>","-1"==i[a].y_kc||null==i[a].y_kc||""==i[a].y_kc?o+='<p class="date-kc">余:999</p></td>':o+='<p class="date-kc">余:<span class="kc">'+i[a].y_kc+"</span></p></td>")):o+="<td></td>";o+="</tr>"}$("#priceDay").html(o),_.text(t),w.text(e)}function a(t){for(var e=t.s_img,i=e.length,s="",n=0;n<i;n++)s+='<img class="item-pic" src='+e[n].imgtitle+">";$("#proPic").html(s);var a=$("#nowNum"),h=$("#allNum"),l=1,c=i,p=$("#proPic"),u=$("#prevMonthBtn"),d=$("#nextMonthBtn");h.text(c),new r(p[0],{swipe:function(t){var e=t.direction,i=p.children().eq(l-1);"Left"==e&&l<c?(i.animate({left:"-100%"},300).next().animate({left:"0%"},300),a.text(l+=1)):"Right"==e&&1!=l&&(i.animate({left:"100%"},300).prev().animate({left:"0%"},300),a.text(l-=1))}}),$("#proID").html(t.s_code),$("#proName").text(t.s_goods_name),wx.ready(function(){wx.onMenuShareTimeline({title:$("#proName").text(),link:Y,imgUrl:$(".item-pic").eq(0).prop("src")}),wx.onMenuShareAppMessage({title:document.title,desc:$("#proName").text(),link:Y,imgUrl:$(".item-pic").eq(0).prop("src")})}),u.click(function(){if(0==M)return $(this).css("background","#eaeaea"),!1;d.css("background","#3385ff"),b-=1,0==b&&(b=12,y-=1),o(b,y,m[M-1]),0==--M&&$(this).css("background","#eaeaea")}),d.click(function(){if(M==f-1)return!1;u.css("background","#3385ff"),b+=1,13==b&&(b=1,y+=1),o(b,y,m[M+1]),++M==f-1&&$(this).css("background","#eaeaea")});var g="";g+='<p><span class="title">费用包含 : </span>'+t.s_name+"</p>",$("#feiyongContent").html(g);var x="";x+='<p><span class="title">间夜 : </span>'+t.s_hotel_day+"晚2天</p>",x+='<p><span class="title">类型 : </span>套餐适用人数'+t.s_man_num+"成人"+t.s_child_num+"儿童</p>",x+='<p><span class="title">提前预定时间 : </span>',0==t.s_yd_time?x+="当天的"+t.s_hotel_yd_time+"分(中国时区)前可预订":x+="提前"+t.s_yd_time+"天"+t.s_hotel_yd_time+"分(中国时区)前可预订",x+='<p><span class="title">订单确认时间 : </span>'+t.s_hotel_sure_time+"</p>",x+='<p><span class="title">预订份数限制 : </span>最小购买份数'+t.s_hotel_buy_m_num,t.s_hotel_buy_b_num?x+=" 最大购买份数"+t.s_hotel_buy_b_num+"</p>":x+="</p>",t.s_yq_ts&&(x+='<p><span class="title">友情提示 : </span>'+t.s_yq_ts+"</p>"),t.s_use_info&&(x+='<p><span class="title">使用说明 : </span>'+t.s_use_info+"</p>"),$("#yudingContent").html(x)}function h(t,e,i){clearInterval(n),clearInterval(o);var s={0:A.offset().top-40,1:F.offset().top-40,2:I.offset().top-40};if(s[t]>e)var n=setInterval(function(){e+=15,window.scrollTo(0,e),e>=s[t]&&clearInterval(n)},10);else var o=setInterval(function(){e-=15,window.scrollTo(0,e),e<=s[t]&&clearInterval(o)},10)}function l(){if("--"==$("#proPrice").text())return p("请先从价格日历选择日期"),!1;d.show(),$.ajax({url:"http://www.suiyiyou.net/index.php/Weixin/BaseLogin/logined",type:"POST",success:function(t){var e=t.code;e=n("shopCode"),k=n("shopType");var i=$(".js_choose.on"),o=i.find(".kc").text();s("price",$("#proPrice").text(),18e5),s("date",$("#goTime").text(),18e5),s("user",x,18e5),s("kc",o,18e5),s("name",g,18e5),s("sCode",T,18e5),HREF=controller+"/d_hotel?shopCode="+e+"&shopType="+k,d.hide(),location.href=HREF}})}i(1);var r=i(2),c=i(3),p=i(4),u=i(5),d=i(6);d.show();var m,f,g,x,T,v=new Date,y=v.getFullYear(),b=v.getMonth()+1,_=$("#priceMonth"),w=$("#priceYear"),M=0,k=n("shopType"),D=n("shopCode");$.ajax({url:"http://www.suiyiyou.net/index.php/Weixin/Detail/detail",data:{shopType:k,shopCode:D},success:function(t){if(d.hide(),200==t.code){var e=t.data;g=e.s_name,T=e.s_code,x=e.s_user_id,m=t.data.date,f=m.length,o(b,y,m[0]),a(e)}else u("您查看的产品已下架!",function(){location.href=controller+"/home"})}});var S=$("#proPrice"),L=$("#goTime");$("#priceDay").on("click",".js_choose",function(){$(".js_choose").removeClass("on"),$(this).addClass("on");var t=$(this).find(".ticket-pri").text();S.text(t);var e=$(this).attr("data-gotime");L.text(e)});var P=$("#contentList"),E=P.offset().top,C=$(document),A=$("#riliNav"),F=$("#feiyongNav"),I=$("#yudingNav");C.scroll(function(){C.scrollTop()>=E+40?P.css({position:"fixed",backgroundColor:"rgba(51, 133, 255,0.8)",color:"#fff"}):P.css({position:"relative",backgroundColor:"#fff",color:"#3385ff"})}),$(".list-item").click(function(){var t=$(this),e=document.documentElement.scrollTop||window.pageYOffset||document.body.scrollTop;h(t.index(),e,$(this))}),$("#nowBuyBtn").click(function(){l()}),CONFIG.jsApiList=["onMenuShareTimeline","onMenuShareAppMessage"],wx.config(CONFIG);var Y;Y=n("pid")?location.href:location.href+"&pid="+function(t){var e=document.cookie.split("; "),i=0;for(i=0;i<e.length;i++){var s=e[i].split("=");if(s[0]==t){return decodeURIComponent(s[1])}}return""}("pid")},function(t,e){},function(t,e,i){!function(){function e(t){return Math.sqrt(t.x*t.x+t.y*t.y)}function i(t,e){return t.x*e.x+t.y*e.y}function s(t,s){var n=e(t)*e(s);if(0===n)return 0;var o=i(t,s)/n;return o>1&&(o=1),Math.acos(o)}function n(t,e){return t.x*e.y-e.x*t.y}function o(t,e){var i=s(t,e);return n(t,e)>0&&(i*=-1),180*i/Math.PI}function a(t,e){var i=new h(t);return i.add(e),i}var h=function(t){this.handlers=[],this.el=t};h.prototype.add=function(t){this.handlers.push(t)},h.prototype.del=function(t){t||(this.handlers=[]);for(var e=this.handlers.length;e>=0;e--)this.handlers[e]===t&&this.handlers.splice(e,1)},h.prototype.dispatch=function(){for(var t=0,e=this.handlers.length;t<e;t++){var i=this.handlers[t];"function"==typeof i&&i.apply(this.el,arguments)}};var l=function(t,e){this.element="string"==typeof t?document.querySelector(t):t,this.start=this.start.bind(this),this.move=this.move.bind(this),this.end=this.end.bind(this),this.cancel=this.cancel.bind(this),this.element.addEventListener("touchstart",this.start,!1),this.element.addEventListener("touchmove",this.move,!1),this.element.addEventListener("touchend",this.end,!1),this.element.addEventListener("touchcancel",this.cancel,!1),this.preV={x:null,y:null},this.pinchStartLen=null,this.zoom=1,this.isDoubleTap=!1;var i=function(){};this.rotate=a(this.element,e.rotate||i),this.touchStart=a(this.element,e.touchStart||i),this.multipointStart=a(this.element,e.multipointStart||i),this.multipointEnd=a(this.element,e.multipointEnd||i),this.pinch=a(this.element,e.pinch||i),this.swipe=a(this.element,e.swipe||i),this.tap=a(this.element,e.tap||i),this.doubleTap=a(this.element,e.doubleTap||i),this.longTap=a(this.element,e.longTap||i),this.singleTap=a(this.element,e.singleTap||i),this.pressMove=a(this.element,e.pressMove||i),this.twoFingerPressMove=a(this.element,e.twoFingerPressMove||i),this.touchMove=a(this.element,e.touchMove||i),this.touchEnd=a(this.element,e.touchEnd||i),this.touchCancel=a(this.element,e.touchCancel||i),this._cancelAllHandler=this.cancelAll.bind(this),window.removeEventListener("scroll",this._cancelAllHandler),window.addEventListener("scroll",this._cancelAllHandler),this.delta=null,this.last=null,this.now=null,this.tapTimeout=null,this.singleTapTimeout=null,this.longTapTimeout=null,this.swipeTimeout=null,this.x1=this.x2=this.y1=this.y2=null,this.preTapPosition={x:null,y:null}};l.prototype={start:function(t){if(t.touches){this.now=Date.now(),this.x1=t.touches[0].pageX,this.y1=t.touches[0].pageY,this.delta=this.now-(this.last||this.now),this.touchStart.dispatch(t),null!==this.preTapPosition.x&&(this.isDoubleTap=this.delta>0&&this.delta<=250&&Math.abs(this.preTapPosition.x-this.x1)<30&&Math.abs(this.preTapPosition.y-this.y1)<30),this.preTapPosition.x=this.x1,this.preTapPosition.y=this.y1,this.last=this.now;var i=this.preV;if(t.touches.length>1){this._cancelLongTap(),this._cancelSingleTap();var s={x:t.touches[1].pageX-this.x1,y:t.touches[1].pageY-this.y1};i.x=s.x,i.y=s.y,this.pinchStartLen=e(i),this.multipointStart.dispatch(t)}this._preventTap=!1,this.longTapTimeout=setTimeout(function(){this.longTap.dispatch(t),this._preventTap=!0}.bind(this),750)}},move:function(t){if(t.touches){var i=this.preV,s=t.touches.length,n=t.touches[0].pageX,a=t.touches[0].pageY;if(this.isDoubleTap=!1,s>1){var h=t.touches[1].pageX,l=t.touches[1].pageY,r={x:t.touches[1].pageX-n,y:t.touches[1].pageY-a};null!==i.x&&(this.pinchStartLen>0&&(t.zoom=e(r)/this.pinchStartLen,this.pinch.dispatch(t)),t.angle=o(r,i),this.rotate.dispatch(t)),i.x=r.x,i.y=r.y,null!==this.x2&&null!==this.sx2?(t.deltaX=(n-this.x2+h-this.sx2)/2,t.deltaY=(a-this.y2+l-this.sy2)/2):(t.deltaX=0,t.deltaY=0),this.twoFingerPressMove.dispatch(t),this.sx2=h,this.sy2=l}else null!==this.x2?(t.deltaX=n-this.x2,t.deltaY=a-this.y2):(t.deltaX=0,t.deltaY=0),this.pressMove.dispatch(t);this.touchMove.dispatch(t),this._cancelLongTap(),this.x2=n,this.y2=a,s>1&&t.preventDefault()}},end:function(t){if(t.changedTouches){this._cancelLongTap();var e=this;t.touches.length<2&&this.multipointEnd.dispatch(t),this.x2&&Math.abs(this.x1-this.x2)>30||this.y2&&Math.abs(this.y1-this.y2)>30?(t.direction=this._swipeDirection(this.x1,this.x2,this.y1,this.y2),this.swipeTimeout=setTimeout(function(){e.swipe.dispatch(t)},0)):(this.tapTimeout=setTimeout(function(){e._preventTap||e.tap.dispatch(t),e.isDoubleTap&&(e.doubleTap.dispatch(t),clearTimeout(e.singleTapTimeout),e.isDoubleTap=!1)},0),e.isDoubleTap||(e.singleTapTimeout=setTimeout(function(){e.singleTap.dispatch(t)},250))),this.touchEnd.dispatch(t),this.preV.x=0,this.preV.y=0,this.zoom=1,this.pinchStartLen=null,this.x1=this.x2=this.y1=this.y2=null}},cancelAll:function(){this._preventTap=!0,clearTimeout(this.singleTapTimeout),clearTimeout(this.tapTimeout),clearTimeout(this.longTapTimeout),clearTimeout(this.swipeTimeout)},cancel:function(t){this.cancelAll(),this.touchCancel.dispatch(t)},_cancelLongTap:function(){clearTimeout(this.longTapTimeout)},_cancelSingleTap:function(){clearTimeout(this.singleTapTimeout)},_swipeDirection:function(t,e,i,s){return Math.abs(t-e)>=Math.abs(i-s)?t-e>0?"Left":"Right":i-s>0?"Up":"Down"},on:function(t,e){this[t]&&this[t].add(e)},off:function(t,e){this[t]&&this[t].del(e)},destroy:function(){return this.singleTapTimeout&&clearTimeout(this.singleTapTimeout),this.tapTimeout&&clearTimeout(this.tapTimeout),this.longTapTimeout&&clearTimeout(this.longTapTimeout),this.swipeTimeout&&clearTimeout(this.swipeTimeout),this.element.removeEventListener("touchstart",this.start),this.element.removeEventListener("touchmove",this.move),this.element.removeEventListener("touchend",this.end),this.element.removeEventListener("touchcancel",this.cancel),this.rotate.del(),this.touchStart.del(),this.multipointStart.del(),this.multipointEnd.del(),this.pinch.del(),this.swipe.del(),this.tap.del(),this.doubleTap.del(),this.longTap.del(),this.singleTap.del(),this.pressMove.del(),this.twoFingerPressMove.del(),this.touchMove.del(),this.touchEnd.del(),this.touchCancel.del(),this.preV=this.pinchStartLen=this.zoom=this.isDoubleTap=this.delta=this.last=this.now=this.tapTimeout=this.singleTapTimeout=this.longTapTimeout=this.swipeTimeout=this.x1=this.x2=this.y1=this.y2=this.preTapPosition=this.rotate=this.touchStart=this.multipointStart=this.multipointEnd=this.pinch=this.swipe=this.tap=this.doubleTap=this.longTap=this.singleTap=this.pressMove=this.touchMove=this.touchEnd=this.touchCancel=this.twoFingerPressMove=null,null}},t.exports=l}()},function(t,e,i){var s={getMonthFirstDay:function(t,e){return new Date(e,t,1).getDay()},getMonthTotalDate:function(t,e){return new Date(e,t,0).getDate()},getFromTodayDays:function(t,e,i){var s,n=new Date,o=new Date;n.setFullYear(i),n.setMonth(e),n.setDate(t);var a=Math.floor((n.getTime()-o.getTime())/864e5),s="今天";return 0==a?s="今天":1==a?s="明天":1==a?s="昨天":a>1?s=a+"天后":a<-1&&(s=0-a+"天前"),s},dataPriceArr:function(t,e){for(var i=new Date,n=s.getMonthFirstDay(t-1,e),o=s.getMonthTotalDate(t,e),a=[],h=[],l=1;;l++){if(l<=n)h.push("");else{if(!(l<=o+n)){for(var r=h.length,c=0;c+r<7;c++)h.push("");a.push(h);break}h.push({num:l-n,isShowDayInfo:!1,isToday:t==i.getMonth()+1&&l-n==i.getDate()&&e==i.getFullYear()})}7==h.length&&(a.push(h),h=[])}return a}};t.exports=s.dataPriceArr},function(t,e,i){var s=function(t){var e=$("<div></div>"),i=($('<i class="iconfont icon-jinggao"></i>'),$("<span></span>"));e.css({position:"fixed",textAlign:"center",width:"180px",bottom:"30px",left:"calc(50% - 90px)",fontSize:"12px",borderRadius:"3px",color:"#fff",opacity:"0.1",background:"rgba(0,0,0,0.7)"}),i.css({lineHeight:"25px"}),i.append(t),e.append(i),$("body").append(e),e.animate({opacity:"1",bottom:"50px"},200,function(){setTimeout(function(){e.animate({opacity:"0.1",bottom:"30px"},function(){e.remove()})},1500)})};t.exports=s},function(t,e,i){var s=function(t,e){var i=this;this.text=t||"哪里出了点问题!",this.bg=$("<div></div>"),this.box=$("<div></div>"),this.p=$("<p></p>"),this.btn=$("<p>知道了</p>"),this.p.html(this.text),this.bg.css({position:"fixed",top:"0",left:"0",width:"100%",height:"100%",background:"rgba(0,0,0,0.7)",zIndex:"99"}),this.box.css({width:"90%",height:"100px",background:"#fff",textAlign:"center",margin:"65% auto 0",position:"relative",borderRadius:"5px",border:"1px solid #3385ff",opacity:"0"}),this.p.css({fontSize:"14px",color:"#777",padding:"0 5px",lineHeight:"70px"}),this.btn.css({width:"100%",height:"30px",lineHeight:"30px",fontSize:"15px",color:"#fff",textAlign:"center",position:"absolute",bottom:"0",borderTop:"1px solid #3385ff",boxSizing:"border-box",background:"rgb(131,176,243)"}),this.box.append(this.p,this.btn),this.bg.append(this.box),$("body").append(this.bg),this.box.animate({opacity:"1"},300),this.btn.click(function(){i.box.animate({opacity:"0"},300,function(){i.bg.remove(),e&&e()})})};t.exports=s},function(t,e,i){function s(){this.container=$("<div></div>"),this.container.prop("id","loadingPc");var t=$("<div></div>");this.container.prop("class","loading-box");var e=$("<p>请稍后</p>"),i=$('<img src="http://www.suiyiyou.net/Public/common/loading.svg">');this.container.css({position:"fixed",left:0,top:0,width:"100%",height:"100%",zIndex:99,display:"none"}),t.css({width:"100px",height:"100px",background:"rgba(0, 0, 0, 0.5)",borderRadius:"10px",margin:"70% auto 0"}),i.css({margin:"0 auto",paddingTop:"10px",display:"block"}),e.css({textAlign:"center",color:"#fff",fontSize:"14px",marginTop:"5px"}),t.append(i,e),this.container.append(t),$("body").append(this.container),this.show=function(){this.container.show()},this.hide=function(){this.container.hide()}}t.exports=new s}]);