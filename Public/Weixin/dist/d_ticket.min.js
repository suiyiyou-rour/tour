!function(e){function t(n){if(i[n])return i[n].exports;var o=i[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var i={};t.m=e,t.c=i,t.d=function(e,i,n){t.o(e,i)||Object.defineProperty(e,i,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var i=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(i,"a",i),i},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=13)}({0:function(e,t,i){var n=function(e){var t=$("<div></div>"),i=($('<i class="iconfont icon-jinggao"></i>'),$("<span></span>"));t.css({position:"fixed",textAlign:"center",width:"180px",bottom:"30px",left:"calc(50% - 90px)",fontSize:"12px",borderRadius:"3px",color:"#fff",opacity:"0.1",background:"rgba(0,0,0,0.7)"}),i.css({lineHeight:"25px"}),i.append(e),t.append(i),$("body").append(t),t.animate({opacity:"1",bottom:"50px"},200,function(){setTimeout(function(){t.animate({opacity:"0.1",bottom:"30px"},function(){t.remove()})},1500)})};e.exports=n},1:function(e,t,i){function n(){this.container=$("<div></div>"),this.container.prop("id","loadingPc");var e=$("<div></div>");this.container.prop("class","loading-box");var t=$("<p>请稍后</p>"),i=$('<img src="http://www.suiyiyou.net/Public/common/loading.svg">');this.container.css({position:"fixed",left:0,top:0,width:"100%",height:"100%",zIndex:99,display:"none"}),e.css({width:"100px",height:"100px",background:"rgba(0, 0, 0, 0.5)",borderRadius:"10px",margin:"70% auto 0"}),i.css({margin:"0 auto",paddingTop:"10px",display:"block"}),t.css({textAlign:"center",color:"#fff",fontSize:"14px",marginTop:"5px"}),e.append(i,t),this.container.append(e),$("body").append(this.container),this.show=function(){this.container.show()},this.hide=function(){this.container.hide()}}e.exports=new n},13:function(e,t,i){function n(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),i=window.location.search.substr(1).match(t);return null!=i?encodeURI(i[2]):null}function o(e){var t=document.cookie.split("; "),i=0;for(i=0;i<t.length;i++){var n=t[i].split("=");if(n[0]==e){return decodeURIComponent(n[1])}}return""}function r(e){return!!/^[1-9]{1}[0-9]{14}$|^[1-9]{1}[0-9]{16}([0-9]|[xX])$/.test(e)}i(14);var a=i(0),c=i(1),s=o("price"),p=n("shopCode"),d=n("shopType"),u=o("name"),l=o("date"),f=l.split("-"),m=$("#bottomTotalPri"),x=o("kc"),h=o("mess"),v=(o("oneIdentify"),o("use")),g={0:"周一",1:"周二",2:"周三",3:"周四",4:"周五",5:"周六",6:"周日"};if(v){v=JSON.parse(v),timeHtml=v.limit,$("#tips").show();for(var b=0;b<7;b++)"true"==v.time[b]&&(timeHtml+=" <span> "+g[b]+" </span>");if(v.no){timeHtml+=" <p><span>不可用日期 : </span> ";for(var b=0;b<v.no.length;b++)timeHtml+=v.no[b]+" ";timeHtml+="</p>"}$("#ticketTime").html(timeHtml)}else $("#ticketTime").text(l+"("+function(e,t,i){return{0:"周日",1:"周一",2:"周二",3:"周三",4:"周四",5:"周五",6:"周六"}[new Date(e,t-1,i).getDay()]}(f[0],f[1],f[2])+")");$("#onePrice").text(s),$("#totalPri").text(s),m.text(s),u?$("#ticketName").text(u):location.href=controller+"/p_ticket?shopCode="+p+"&shopType="+d,"1"!=h&&"2"!=h||$("#oneIdentify").show(),c.hide(),$("#ticketNumBox").on("click",".js_red",function(){var e=$(this).parents(".num-box"),t=100*+$("#onePrice").text(),i=e.find(".choose-num"),n=+i.text();if(1==n)return a("最少购买数量1"),!1;var o=100*+m.text();i.text(n-=1),o=((o-t)/100).toFixed(2),Number(o)==o&&m.text(Number(o))}),$("#ticketNumBox").on("click",".js_add",function(){var e=$(this).parents(".num-box"),t=100*+$("#onePrice").text(),i=e.find(".choose-num"),n=+i.text();if(x="不限"==x?999:+x,n==x)return a("已达到库存上限"),!1;var o=100*+m.text();i.text(n+=1),o=((o+t)/100).toFixed(2),Number(o)==o&&m.text(Number(o))}),$("#goTourBtn").click(function(){if($("#reserveCheck").prop("checked")){var e="是否确认"+$("#ticketTime").text()+"出行?";if(v&&(e="此产品为有效期模式,游玩日期"+$("#ticketTime").text()+",确认购买?"),confirm(e)){$("#reserveMess").fadeOut(200,function(){$("#tourristMess").fadeIn(200)});var t=m.text();if($("#orderTotalPri").text(t),"2"==h){for(var i=$("#secItem"),n="",o=+$("#ticketNum").text()-1,r=0;r<o;r++)n+='<div class="item-container"><div class="item-box"><p class="item-p"><span class="red">'+(r+2)+'.</span>游客姓名 : </p><input class="item-inp name" placeholder="姓名" type="text"></div><div class="item-box"><p class="item-p">身份证号 : </p><input class="item-inp identify" type="text" placeholder="若是儿童输入出生日期"></div></div>';i.html(n)}}}else a("请先确认预定须知!!!")}),$(".iconfont.icon-zuojiantou").click(function(){$("#tourristMess").fadeOut(200,function(){$("#reserveMess").fadeIn(200)})}),$("#takeOrderBtn").click(function(){var e=$("#tourName").val();if(!e)return a("请填写第1位游客的真实姓名!"),!1;var t=$("#tourMobile").val();if(!t)return a("请填写第1位游客的手机号码!"),!1;if(!/^1\d{10}$/.test(t))return a("第1位游客手机号码有误，请重填"),!1;var i=$("#tourIdentify").val();if("block"==$("#oneIdentify").css("display")){if(!i)return a("请输入第1位游客的身份证号码!"),!1;if(!r(i))return a("第1位游客身份证号码错误!"),!1}var s=$("#remarks").val(),p={};p.playerInfo=[];var u=$(".item-container").length;if(u>0)for(var f=0;f<u;f++){var m=$(".item-container").eq(f),x=m.find(".name").val(),h=m.find(".identify").val();if(!x)return a("请输入第"+(f+2)+"位游客的姓名!"),!1;if(!h)return a("请输入第"+(f+2)+"位游客的身份证或出生日期!"),!1;var v={name:x,identify:h};p.playerInfo.push(v)}p.code=n("shopCode"),p.gyscode=o("user"),p.identification=i,p.mobile=t,p.name=e,p.jxscode="",p.remarks=s,p.date=l,p.num=+$("#ticketNum").text(),p.totalPrice=$("#orderTotalPri").text();var g=$(this);g.prop("disabled",!0),g.css("backgroundColor","#ffa69c"),c.show(),$.ajax({url:"http://www.suiyiyou.net/index.php/weixin/Order/addTickOrder",data:p,type:"POST",success:function(e){c.hide();var t=e.code,i=e.data;200==t?location.href="http://www.suiyiyou.net/index.php/Weixin/Jsapi/index?orderSn="+i.orderSn+"&shopType="+d+"&":(a(e.msg),g.prop("disabled",!1),g.css("backgroundColor","#ff1900"))}})}),CONFIG.jsApiList=["onMenuShareTimeline","onMenuShareAppMessage"],wx.config(CONFIG);var y;y=n("pid")?location.href:location.href+"&pid="+o("pid"),wx.ready(function(){wx.onMenuShareTimeline({title:document.title,link:y,imgUrl:public+"/Weixin/image/wxbg.png"}),wx.onMenuShareAppMessage({title:document.title,desc:"我的旅游小店，随我心，游天下",link:y,imgUrl:public+"/Weixin/image/wxbg.png"})})},14:function(e,t){}});